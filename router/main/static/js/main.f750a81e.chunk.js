(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),o=a.n(l),c=(a(22),a(29)),s=a(37),m=a(36),i=a(35),u=a(30);var d=function(e){let{onLoginSuccessful:t}=e;const[a,l]=Object(n.useState)(""),[o,d]=Object(n.useState)(""),[E,g]=Object(n.useState)(!1);return r.a.createElement(c.a,null,r.a.createElement(s.a,{className:"mt-5"},r.a.createElement(s.a.Header,{as:"h1"},"Login"),r.a.createElement(s.a.Body,null,r.a.createElement(m.a,{className:"w-100",onSubmit:async e=>{e.preventDefault(),g(!1);const n=await async function(e){let{email:t,password:a}=e;return await fetch("http://api-user66004.se-rmutl.net/api/auth/login",{method:"POST",body:JSON.stringify({email:t,password:a}),headers:{"Content-Type":"application/json"}}).then((e=>{if(console.log(e),!e.ok)throw new Error("HTTP status "+e.status);return e.json()})).catch((e=>{console.log(e)}))}({email:a,password:o});if(console.log(n),n){const{title:e,firstname:a,lastname:r,picture:l,token:o}=n;localStorage.setItem("title",e),localStorage.setItem("firstname",a),localStorage.setItem("lastname",r),localStorage.setItem("picture",l),localStorage.setItem("token",o),t()}else g(!0)}},r.a.createElement(m.a.Group,{controlId:"formBasicEmail"},r.a.createElement(m.a.Label,null,"Email address"),r.a.createElement(m.a.Control,{type:"email",placeholder:"Enter email",onChange:e=>l(e.target.value),value:a}),r.a.createElement(m.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(m.a.Group,{controlId:"formBasicPassword"},r.a.createElement(m.a.Label,null,"Password"),r.a.createElement(m.a.Control,{type:"password",placeholder:"Password",onChange:e=>d(e.target.value),value:o})),E&&r.a.createElement(i.a,{variant:"danger"},"The email address and password you entered don't match any account. Please try again."),r.a.createElement(u.a,{variant:"primary",type:"submit"},"Submit")))))},E=a(31),g=a(32),p=a(33),h=a(34);var f=function(e){let{onLogout:t}=e;const[a,l]=Object(n.useState)(!1),[o,d]=Object(n.useState)(!1),[f,y]=Object(n.useState)(""),[S,w]=Object(n.useState)([]),b=localStorage.title,v=localStorage.firstname,k=localStorage.lastname,I=localStorage.picture;return r.a.createElement(c.a,{fluid:!0},r.a.createElement(E.a,{className:"mt-2 mb-2 justify-content-end",noGutters:!0},r.a.createElement(u.a,{variant:"outline-danger",onClick:t},"Log out")),r.a.createElement(E.a,{noGutters:!0},r.a.createElement("div",{className:"user-image"},r.a.createElement("img",{src:I,className:"rounded-circle",alt:v})),r.a.createElement("h1",null,"Welcome! ",b+" "+v+" "+k)),r.a.createElement(E.a,{className:"mt-2",noGutters:!0},r.a.createElement("h6",null,"Enter one or multiple keywords below to search for artworks in the Art Institute of Chicago.")),r.a.createElement(E.a,{noGutters:!0},r.a.createElement(m.a,{className:"w-100 mb-5",onSubmit:async e=>{e.preventDefault(),l(!0);const t=await async function(e){let{keyword:t}=e;return await fetch("http://api-user66004.se-rmutl.net/api/homepage/getArtworks/".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error("HTTP status "+e.status);return e.json()})).catch((e=>{console.log(e)}))}({keyword:f});w(t),d(!t||!t.length),l(!1)}},r.a.createElement(g.a,null,r.a.createElement(m.a.Control,{type:"text",placeholder:"e.g. Monet, O'Keeffe, Ancient Greek...",onChange:e=>{y(e.target.value)},value:f}),r.a.createElement(g.a.Prepend,null,r.a.createElement(u.a,{variant:"outline-primary",disabled:!f,type:"submit"},"Search artworks"))))),a&&r.a.createElement(E.a,{className:"justify-content-center mb-5"},r.a.createElement(p.a,{animation:"border",variant:"primary"})),o&&!a?r.a.createElement(i.a,{variant:"info"},"No results were found for the entered keyword/s."):r.a.createElement(h.a,null,S.map(((e,t)=>{const{id:a,title:n,image_url:l,artist_display:o,date_display:c,medium_display:m,place_of_origin:i}=e;return r.a.createElement(s.a,{key:"artwork-".concat(a)},r.a.createElement("a",{href:l,target:"_blank",rel:"noreferrer","aria-current":"true"},r.a.createElement(s.a.Img,{variant:"top",src:l})),r.a.createElement(s.a.Body,null,r.a.createElement(s.a.Title,null,n),r.a.createElement(s.a.Text,{className:"text-muted",style:{whiteSpace:"pre-line"}},i,", ",c,r.a.createElement("br",null),r.a.createElement("small",{className:"text-muted"},o)),r.a.createElement(s.a.Text,null,r.a.createElement("small",{className:"text-muted"},m))))}))))};var y=function(){const[e,t]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{localStorage.getItem("token")?t(!0):t(!1)}),[]),e&&r.a.createElement(f,{onLogout:()=>{localStorage.removeItem("title"),localStorage.removeItem("firstname"),localStorage.removeItem("lastname"),localStorage.removeItem("picture"),localStorage.removeItem("token"),t(!1)}})||r.a.createElement(d,{onLoginSuccessful:()=>{t(!0)}})};var S=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,38)).then((t=>{let{getCLS:a,getFID:n,getFCP:r,getLCP:l,getTTFB:o}=t;a(e),n(e),r(e),l(e),o(e)}))};a(26);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),S()}},[[27,1,2]]]);
//# sourceMappingURL=main.f750a81e.chunk.js.map